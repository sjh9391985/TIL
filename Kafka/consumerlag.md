### kafka consumer lag

- 카프카 프로듀서는 토픽의 파티션에 데이터를 차곡차곡 넣게 됨.
- 차곡차곡 들어간 데이터에는 오프셋이라는 숫자가 붙게 됨.
- ex) 한개의 파티션에 데이터를 넣을 경우 0부터 순차적으로 숫자가 매겨짐. 프로듀서는 계속 데이터를 넣고 컨슈머는 계속 데이터를 가져가게 됨.
- 프로듀서가 데이터를 넣어주는 속도가 컨슈머가 데이터를 가져가는 속도보다 빠르면 프로듀서의 데이터 오프셋과 컨슈머의 오프셋에서 차이가 발생하는데 이것을 consumer lag 라고 부름.
- lag은 적을수도 있고 많을 수도 있음. lag을 통해 현재 파이프라인데 연결되어 있는 프로듀서와 컨슈머의 상태에 대해 유추가 가능함.
- 주로 컨슈머의 상태에 대해 볼때 사용함.
- kafka consumer lag: 컨슈머가 마지막으로 읽은 offset과 프로듀서가 마지막으로 넣은 offset의 차이를 기반으로 함.
- lag은 여러개가 존재 할 수 있음.

